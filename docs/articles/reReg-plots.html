<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visualization of recurrent event data • reReg</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Visualization of recurrent event data">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">reReg</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.1.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/reReg-plots.html">Visualization of recurrent event data</a>
    </li>
    <li>
      <a href="../articles/reReg-sims.html">Simulating recurrent event data</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://github.com/stc04003/reReg">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Visualization of recurrent event data</h1>
                        <h4 class="author">Sy Han (Steven) Chiou</h4>
            
            <h4 class="date">2018-10-13</h4>
      
      <small class="dont-index">Source: <a href="http://github.com/stc04003/reReg/blob/master/vignettes/reReg-plots.Rmd"><code>vignettes/reReg-plots.Rmd</code></a></small>
      <div class="hidden name"><code>reReg-plots.Rmd</code></div>

    </div>

    
    
<p>In this vignette, we demonstrate how to create a <code>reSurv</code> object in <strong><code>reReg</code></strong> package. The <code>reSurv</code> object is then used to create event plots and cumulative sample mean (CSM) plots. We will illustrate the usage of our functions with the <code>readmission</code> data from the <strong><code>frailtypack</code></strong> package <span class="citation">(Rondeau, Mazroui, and Gonzalez 2012, <span class="citation">González Ruiz et al. (2005)</span>)</span>. The data contains re-hospitalization times after surgery in patients diagnosed with colorectal cancer. In this data set, the recurrent event is the readmission and the terminal event is either death or end of study. See <code>?readmission</code> for data details.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">library</span>(reReg)
&gt;<span class="st"> </span><span class="kw">data</span>(readmission, <span class="dt">package =</span> <span class="st">"frailtypack"</span>)
&gt;<span class="st"> </span><span class="kw">head</span>(readmission)</code></pre></div>
<pre><code>  id enum t.start t.stop time event      chemo    sex dukes charlson death
1  1    1       0     24   24     1    Treated Female     D        3     0
2  1    2      24    457  433     1    Treated Female     D        0     0
3  1    3     457   1037  580     0    Treated Female     D        0     0
4  2    1       0    489  489     1 NonTreated   Male     C        0     0
5  2    2     489   1182  693     0 NonTreated   Male     C        0     0
6  3    1       0     15   15     1 NonTreated   Male     C        3     0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">attach</span>(readmission)</code></pre></div>
<div id="resurv-objects" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#resurv-objects" class="anchor"></a><code>reSurv</code> objects</h2>
<p>The usage of <code>reSurv</code> is similar to the <code>Surv</code> function in the <strong><code>survival</code></strong> package. There are five arguments in <code>reSurv</code> but not all of them need to be specified. The arguments of <code>reSurv</code> is as follow</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">args</span>(reSurv)</code></pre></div>
<pre><code>function (time1, time2, id, event, status, origin = 0) 
NULL</code></pre>
<p>The five arguments are as follows</p>
<ul>
<li>
<code>time1</code> starting time for the gap time between two successive recurrent events</li>
<li>
<code>time2</code> ending time for the gap time between two successive recurrent events</li>
<li>
<code>id</code> subject’s id</li>
<li>
<code>event</code> a binary vector used as the recurrent event indicator; <code>event = 0</code> for non-recurrent times (such as the censoring times)</li>
<li>
<code>status</code> a binary vector used as the status indicator for the terminal event; <code>status = 0</code> for censored time</li>
<li>
<code>origin</code> a numerical vector indicating the time origin of subjects</li>
</ul>
<p>There are a few ways to create an <code>reSurv</code> object. When the starting times and the ending times of recurrent events are known, one can specify both times in <code>reSurv</code>. <!--If the time origins of subjects are equal, as in the `readmission` data, the argument `time2` can be deprecated. --></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(<span class="dt">time1 =</span> t.start, <span class="dt">time2 =</span> t.stop, <span class="dt">id =</span> id, <span class="dt">event =</span> event, <span class="dt">status =</span> death)
&gt;<span class="st"> </span><span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(<span class="dt">time1 =</span> t.stop, <span class="dt">id =</span> id, <span class="dt">event =</span> event, <span class="dt">status =</span> death)</code></pre></div>
<p>The same <code>reSurv</code> objects can be achieved without specifying the argument names:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(t.start, t.stop, id, event, death)
&gt;<span class="st"> </span><span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(t.stop, id, event, death)</code></pre></div>
<p>The function <code>reSurv</code> prints a list-column <code>tibble</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(t.stop, id, event, death)</code></pre></div>
<pre><code># A tibble: 403 x 5
     id recTime   recType   temTime temStatus
  &lt;int&gt; &lt;list&gt;    &lt;list&gt;      &lt;dbl&gt;     &lt;dbl&gt;
1     1 &lt;dbl [2]&gt; &lt;int [2]&gt;    1037         0
2     2 &lt;dbl [1]&gt; &lt;int [1]&gt;    1182         0
3     3 &lt;dbl [1]&gt; &lt;int [1]&gt;     783         1
4     4 &lt;dbl [4]&gt; &lt;int [4]&gt;    2048         0
5     5 &lt;dbl [1]&gt; &lt;int [1]&gt;    1144         0
# ... with 398 more rows</code></pre>
<p>The example above shows patient id #1 experienced 2 readmissions (<code>tij[1]</code> is a list of two <code>double</code>s) with a terminal event at <code>t = 1037</code> (days). The terminal event was censored (<code>status = 0</code>). Similarly, patient id #3 has one readmission and died at <code>t = 783</code> (days). On the other hand patient id # 4 has 4 readmission and was censored at <code>t = 2048</code> (days).</p>
</div>
<div id="event-plots" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#event-plots" class="anchor"></a>Event plots</h2>
<p>Event plots are a quick and easy way to glance at recurrent event data. These can be produced by plotting the <code>reSurv</code> object with <code>R</code>’s generic function <code>plot</code>, shown in Figure 1.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>reObj &lt;-<span class="st"> </span><span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(t.stop, id, event, death)
&gt;<span class="st"> </span><span class="kw">plot</span>(reObj)</code></pre></div>
<div class="figure">
<img src="reReg-plots_files/figure-html/plot-reSurv-1.png" alt="Figure 1: Creating an event plot from a `reSurv` object." width="700"><p class="caption">
Figure 1: Creating an event plot from a <code>reSurv</code> object.
</p>
</div>
<p>Common graphical options like <code>xlab</code>, <code>ylab</code>, <code>main</code>, and more can be directly passed down to <code>plot</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">plot</span>(reObj, <span class="dt">cex =</span> <span class="fl">1.5</span>, <span class="dt">xlab =</span> <span class="st">"Time in days"</span>, <span class="dt">ylab =</span> <span class="st">"Patients"</span>, 
+<span class="st">      </span><span class="dt">main =</span> <span class="st">"Event plot for readmission data"</span>, 
+<span class="st">      </span><span class="dt">terminal.name =</span> <span class="st">"Death"</span>, 
+<span class="st">      </span><span class="dt">recurrent.name =</span> <span class="st">"Hospital readmission"</span>)</code></pre></div>
<div class="figure">
<img src="reReg-plots_files/figure-html/plot-reSurv2-1.png" alt="Figure 2: Creating an event plot from a `reSurv` object with custom labels." width="700"><p class="caption">
Figure 2: Creating an event plot from a <code>reSurv</code> object with custom labels.
</p>
</div>
<p>Separate (stratified) event plots can be produced with the <code>plotEvents</code> function, which is a more specialized function for event plots. To demonstrate this, we first detach <code>readmission</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">detach</span>(readmission)</code></pre></div>
<p>Unlike the generic plot function, <code>plotEvents</code> uses a formula object to specify the stratification.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">args</span>(plotEvents)</code></pre></div>
<pre><code>function (formula, data, order = TRUE, control = list(), ...) 
NULL</code></pre>
<p>Here are some examples to re-create Figure 1 with <code>plotEvents</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw"><a href="../reference/plotEvents.html">plotEvents</a></span>(reObj)
&gt;<span class="st"> </span><span class="kw"><a href="../reference/plotEvents.html">plotEvents</a></span>(reObj, <span class="dt">data =</span> readmission)
&gt;<span class="st"> </span><span class="kw"><a href="../reference/plotEvents.html">plotEvents</a></span>(reObj ~<span class="st"> </span><span class="dv">1</span>, <span class="dt">data =</span> readmission)
&gt;<span class="st"> </span><span class="kw"><a href="../reference/plotEvents.html">plotEvents</a></span>(<span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(t.stop, id, event, death) ~<span class="st"> </span><span class="dv">1</span>, <span class="dt">data =</span> readmission)</code></pre></div>
<p>Figure 2 can be re-created with <code>plotEvents</code> in a similar fashion:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw"><a href="../reference/plotEvents.html">plotEvents</a></span>(<span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(t.stop, id, event, death) ~<span class="st"> </span><span class="dv">1</span>, <span class="dt">data =</span> readmission,
+<span class="st">            </span><span class="dt">cex =</span> <span class="fl">1.5</span>, <span class="dt">xlab =</span> <span class="st">"Time in days"</span>, <span class="dt">ylab =</span> <span class="st">"Patients"</span>, 
+<span class="st">            </span><span class="dt">main =</span> <span class="st">"Event plot for readmission data"</span>, 
+<span class="st">            </span><span class="dt">terminal.name =</span> <span class="st">"Death"</span>, <span class="dt">recurrent.name =</span> <span class="st">"Hospital readmission"</span>)</code></pre></div>
<p>The <code>plotEvents</code> function can also stratify event plots by groups. For example, the following can be used to stratify an event plot by <code>sex</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw"><a href="../reference/plotEvents.html">plotEvents</a></span>(<span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(t.stop, id, event, death) ~<span class="st"> </span>sex, <span class="dt">data =</span> readmission)</code></pre></div>
<div class="figure">
<img src="reReg-plots_files/figure-html/plotEvents-gender-1.png" alt="Figure 3: Event plot grouped by `sex`" width="700"><p class="caption">
Figure 3: Event plot grouped by <code>sex</code>
</p>
</div>
<p>Event plot by <code>sex</code> and <code>chemo</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw"><a href="../reference/plotEvents.html">plotEvents</a></span>(<span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(t.stop, id, event, death) ~<span class="st"> </span>sex +<span class="st"> </span>chemo, <span class="dt">data =</span> readmission)</code></pre></div>
<div class="figure">
<img src="reReg-plots_files/figure-html/plotEvents-gender-chemo-1.png" alt="Figure 4: Event plot grouped by `sex` and `chemo`." width="700"><p class="caption">
Figure 4: Event plot grouped by <code>sex</code> and <code>chemo</code>.
</p>
</div>
</div>
<div id="csm-plots" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#csm-plots" class="anchor"></a>CSM plots</h2>
<p>The nonparametric cumulative sample mean (CSM) function can be used to aid event plots to determine visually whether a trend or other pattern exists. The CSM function is defined as follows: <span class="math display">\[\begin{array}{c}
\hat \mu_n(t) = \sum_{i = 1}^n\int_0^tY_\cdot^{-1}(t)dN_i(t),
\end{array}\]</span> where <span class="math inline">\(Y_\cdot(t) = \sum_{j=1}^nY_i(t)\)</span> is the total number of subjects who are at risk at time <span class="math inline">\(t\)</span> and <span class="math inline">\(N_i(t)\)</span> is the number of events over the time interval [0, t] for the <em>i</em>th process. This estimator is also known as the Nelson-Aalen estimator <span class="citation">(Nelson 2003)</span> and is also implemented in the <code>mcf</code> function in the <strong><code>reda</code></strong> package <span class="citation">(Wang, Fu, and Yan 2017)</span>. Another variation of the CSM function is discussed in <span class="citation">(Cook and Lawless 2007)</span> assuming <span class="math inline">\(Y_i(t) = n\)</span> for all <span class="math inline">\(t\)</span>. This variation is equivalent to the Nelson-Aalen estimator without adjusting for risk set. We refer the Nelson-Aalen estimator and the Cook-Lawless estimator as the CSM function with (default) and without adjusting for risk set, respectively.</p>
<p>The CSM plot can be created with <code>R</code>’s generic function <code>plot</code>, shown in Figure 5.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">plot</span>(reObj, <span class="dt">CSM =</span> <span class="ot">TRUE</span>)</code></pre></div>
<div class="figure">
<img src="reReg-plots_files/figure-html/plot-csm-1.png" alt="Figure 5: Creating a CSM plot from a `reSurv` object." width="700"><p class="caption">
Figure 5: Creating a CSM plot from a <code>reSurv</code> object.
</p>
</div>
<p>The CSM plot can be created with the more specialized function, <code>plotCSM</code>. Both <code>plotEvents</code> and <code>plotCSM</code> return <strong><code>ggplot2</code></strong> objects. A side-by-side CSM plot, showing the CSM functions with and without risk adjustment, is shown in Figure 6.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">library</span>(gridExtra)
&gt;<span class="st"> </span>p1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/plotCSM.html">plotCSM</a></span>(<span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(t.stop, id, event, death) ~<span class="st"> </span><span class="dv">1</span>, <span class="dt">data =</span> readmission, 
+<span class="st">               </span><span class="dt">CSM =</span> <span class="ot">TRUE</span>, <span class="dt">main =</span> <span class="st">""</span>)
&gt;<span class="st"> </span>p2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/plotCSM.html">plotCSM</a></span>(<span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(t.stop, id, event, death) ~<span class="st"> </span><span class="dv">1</span>, <span class="dt">data =</span> readmission, 
+<span class="st">               </span><span class="dt">CSM =</span> <span class="ot">TRUE</span>, <span class="dt">adjrisk =</span> <span class="ot">FALSE</span>, <span class="dt">main =</span> <span class="st">""</span>)
&gt;<span class="st"> </span><span class="kw">grid.arrange</span>(p1, p2, <span class="dt">ncol=</span><span class="dv">2</span>)</code></pre></div>
<div class="figure">
<img src="reReg-plots_files/figure-html/plot-csm2-1.png" alt="Figure 6: Creating a CSM plot from a `reSurv` object." width="700"><p class="caption">
Figure 6: Creating a CSM plot from a <code>reSurv</code> object.
</p>
</div>
<p>As with the <code>plotEvents</code>, <code>plotCSM</code> can generate CSM plots given covariates. Figure 7 depicts the CSM plots grouped by <code>sex</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>p1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/plotCSM.html">plotCSM</a></span>(<span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(t.stop, id, event, death) ~<span class="st"> </span>sex, <span class="dt">data =</span> readmission, 
+<span class="st">               </span><span class="dt">CSM =</span> <span class="ot">TRUE</span>, <span class="dt">main =</span> <span class="st">""</span>)
&gt;<span class="st"> </span>p2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/plotCSM.html">plotCSM</a></span>(<span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(t.stop, id, event, death) ~<span class="st"> </span>sex, <span class="dt">data =</span> readmission, 
+<span class="st">               </span><span class="dt">CSM =</span> <span class="ot">TRUE</span>, <span class="dt">adjrisk =</span> <span class="ot">FALSE</span>, <span class="dt">main =</span> <span class="st">""</span>)
&gt;<span class="st"> </span><span class="kw">grid.arrange</span>(p1, p2, <span class="dt">ncol=</span><span class="dv">2</span>)</code></pre></div>
<div class="figure">
<img src="reReg-plots_files/figure-html/plot-csm-sex-1.png" alt="Figure 7: CSM plot grouped by `sex`." width="700"><p class="caption">
Figure 7: CSM plot grouped by <code>sex</code>.
</p>
</div>
<p>As in <code>plotEvents</code>, the more complicated Figure 8 depicts the CSM plots grouped by <code>sex</code> and <code>chemo</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span>p1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/plotCSM.html">plotCSM</a></span>(<span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(t.stop, id, event, death) ~<span class="st"> </span>sex +<span class="st"> </span>chemo, <span class="dt">data =</span> readmission, 
+<span class="st">               </span><span class="dt">CSM =</span> <span class="ot">TRUE</span>, <span class="dt">main =</span> <span class="st">""</span>)
&gt;<span class="st"> </span>p2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/plotCSM.html">plotCSM</a></span>(<span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(t.stop, id, event, death) ~<span class="st"> </span>sex +<span class="st"> </span>chemo, <span class="dt">data =</span> readmission, 
+<span class="st">               </span><span class="dt">CSM =</span> <span class="ot">TRUE</span>, <span class="dt">adjrisk =</span> <span class="ot">FALSE</span>, <span class="dt">main =</span> <span class="st">""</span>)
&gt;<span class="st"> </span><span class="kw">grid.arrange</span>(p1, p2, <span class="dt">ncol=</span><span class="dv">2</span>)</code></pre></div>
<div class="figure">
<img src="reReg-plots_files/figure-html/plot-csm-sex-chemo-1.png" alt="Figure 8: CSM plots grouped by `sex` and `chemo`." width="700"><p class="caption">
Figure 8: CSM plots grouped by <code>sex</code> and <code>chemo</code>.
</p>
</div>
</div>
<div id="multiple-recurrent-event-types" class="section level2">
<h2 class="hasAnchor">
<a href="#multiple-recurrent-event-types" class="anchor"></a>Multiple recurrent event types</h2>
<p>The functions <code>plotEvents</code> and <code>plotCSM</code> can be used to accommodate recurrent event data with multiple recurrent types. To illustrate this, we generate hypothetical event types and store these in <code>event2</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">library</span>(dplyr)
&gt;<span class="st"> </span><span class="kw">set.seed</span>(<span class="dv">1</span>)
&gt;<span class="st"> </span>readmission &lt;-<span class="st"> </span>readmission %&gt;%<span class="st"> </span><span class="kw">mutate</span>(<span class="dt">event2 =</span> event *<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span>:<span class="dv">3</span>, <span class="dv">861</span>, <span class="ot">TRUE</span>))</code></pre></div>
<p><code>plotEvents</code> and <code>plotCSM</code> functions can still be applied when <code>event</code> is replaced by <code>event2</code>. Different recurrent events will be denoted by different colors and shapes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw"><a href="../reference/plotEvents.html">plotEvents</a></span>(<span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(t.stop, id, event2, death) ~<span class="st"> </span>sex, <span class="dt">data =</span> readmission)</code></pre></div>
<div class="figure">
<img src="reReg-plots_files/figure-html/multi-event-plot-1.png" alt="Figure 9: Event plots with multiple recurrent event types." width="700"><p class="caption">
Figure 9: Event plots with multiple recurrent event types.
</p>
</div>
<p>Default labels can be changed</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw"><a href="../reference/plotCSM.html">plotCSM</a></span>(<span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(t.stop, id, event2, death) ~<span class="st"> </span>sex, <span class="dt">adjrisk =</span> <span class="ot">FALSE</span>, <span class="dt">data =</span> readmission,
+<span class="st">         </span><span class="dt">recurrent.name =</span> <span class="st">"Event types"</span>, <span class="dt">recurrent.type =</span> <span class="kw">c</span>(<span class="st">"Type 1"</span>, <span class="st">"Type 2"</span>, <span class="st">"Type 3"</span>))</code></pre></div>
<div class="figure">
<img src="reReg-plots_files/figure-html/multi-csm2-1.png" alt="Figure 10: CSM plot with multiple recurrent event types and customized labels." width="700"><p class="caption">
Figure 10: CSM plot with multiple recurrent event types and customized labels.
</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="kw">library</span>(ggplot2)
&gt;<span class="st"> </span>p1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/plotCSM.html">plotCSM</a></span>(<span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(t.stop, id, event2, death) ~<span class="st"> </span>sex, <span class="dt">data =</span> readmission, <span class="dt">main =</span> <span class="st">""</span>) +
+<span class="st">   </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">"none"</span>)
&gt;<span class="st"> </span>p2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/plotCSM.html">plotCSM</a></span>(<span class="kw"><a href="../reference/reSurv.html">reSurv</a></span>(t.stop, id, event2, death) ~<span class="st"> </span>sex, <span class="dt">data =</span> readmission, 
+<span class="st">               </span><span class="dt">adjrisk =</span> <span class="ot">FALSE</span>, <span class="dt">main =</span> <span class="st">""</span>) +
+<span class="st">   </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">"none"</span>)
&gt;<span class="st"> </span><span class="kw">grid.arrange</span>(p1, p2, <span class="dt">ncol =</span> <span class="dv">2</span>)</code></pre></div>
<div class="figure">
<img src="reReg-plots_files/figure-html/multi-csm-1.png" alt="Figure 11: CSM plot with multiple recurrent event types." width="700"><p class="caption">
Figure 11: CSM plot with multiple recurrent event types.
</p>
</div>
</div>
<div id="reference" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#reference" class="anchor"></a>Reference</h2>
<div id="refs" class="references">
<div id="ref-cook2007statistical">
<p>Cook, Richard J, and Jerald Lawless. 2007. <em>The Statistical Analysis of Recurrent Events</em>. New York: Wiley.</p>
</div>
<div id="ref-gonzalez2005sex">
<p>González Ruiz, Juan Ramón, Esteve Fernández Muñoz, Víctor Moreno Aguado, Josepa Ribes Puig, Mercè Peris, Matilde Navarro, Maria Cambray i Amenós, and Borràs Andrés. 2005. “Sex Differences in Hospital Readmission Among Colorectal Cancer Patients.” <em>Journal of Epidemiology and Community Health, 2005, Vol. 59, Núm. 6, P. 506-511</em>. BMJ Group.</p>
</div>
<div id="ref-nelson2003recurrent">
<p>Nelson, Wayne B. 2003. <em>Recurrent Events Data Analysis for Product Repairs, Disease Recurrences, and Other Applications</em>. Vol. 10. SIAM.</p>
</div>
<div id="ref-rondeau2012frailtypack">
<p>Rondeau, Virginie, Yassin Mazroui, and Juan R Gonzalez. 2012. “Frailtypack: An R Package for the Analysis of Correlated Survival Data with Frailty Models Using Penalized Likelihood Estimation or Parametrical Estimation.” <em>Journal of Statistical Software</em> 47 (4): 1–28.</p>
</div>
<div id="ref-R:reda">
<p>Wang, Wenjie, Haoda Fu, and Jun Yan. 2017. <em>reda: Recurrent Event Data Analysis</em>. <a href="https://CRAN.R-project.org/package=reda" class="uri">https://CRAN.R-project.org/package=reda</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#resurv-objects"><code>reSurv</code> objects</a></li>
      <li><a href="#event-plots">Event plots</a></li>
      <li><a href="#csm-plots">CSM plots</a></li>
      <li><a href="#multiple-recurrent-event-types">Multiple recurrent event types</a></li>
      <li><a href="#reference">Reference</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Sy Han (Steven) Chiou, Chiung-Yu  Huang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
